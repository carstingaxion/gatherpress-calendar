{"version":3,"file":"view.js","mappings":"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","sources":["webpack://block-gatherpress-calendar/./src/view.js"],"sourcesContent":["/**\n * GatherPress Calendar Block Frontend Script\n *\n * Progressive enhancement for the GatherPress Calendar block.\n * Minimal JavaScript - only for popover interaction.\n * Everything else is handled by CSS.\n *\n * Without JS: Event dots are clickable links that navigate to posts\n * With JS: Event dots show popovers with content overlay\n *\n * @package GatherPressCalendar\n * @since 0.1.0\n */\n\n(function() {\n\t'use strict';\n\n\tlet activePopover = null;\n\tlet activeBackdrop = null;\n\n\tif (document.readyState === 'loading') {\n\t\tdocument.addEventListener('DOMContentLoaded', init);\n\t} else {\n\t\tinit();\n\t}\n\n\t/**\n\t * Initialize popover functionality\n\t */\n\tfunction init() {\n\t\tconst calendars = document.querySelectorAll('.gatherpress-calendar');\n\t\tif (!calendars.length) return;\n\n\t\tcalendars.forEach(setupCalendar);\n\n\t\t// Close on escape\n\t\tdocument.addEventListener('keydown', function(e) {\n\t\t\tif (e.key === 'Escape' && activePopover) {\n\t\t\t\tclosePopover();\n\t\t\t}\n\t\t});\n\t}\n\n\t/**\n\t * Setup calendar event handlers\n\t */\n\tfunction setupCalendar(calendar) {\n\t\tconst events = calendar.querySelectorAll('.gatherpress-calendar__event');\n\n\t\tevents.forEach(function(eventLink) {\n\t\t\teventLink.setAttribute('role', 'button');\n\t\t\teventLink.setAttribute('tabindex', '0');\n\n\t\t\t// Click handler - prevent navigation, show popover\n\t\t\teventLink.addEventListener('click', function(e) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\t\t\t\tshowPopover(eventLink);\n\t\t\t});\n\n\t\t\t// Keyboard support\n\t\t\teventLink.addEventListener('keydown', function(e) {\n\t\t\t\tif (e.key === 'Enter' || e.key === ' ') {\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\tshowPopover(eventLink);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n\n\t/**\n\t * Show popover with event content\n\t */\n\tfunction showPopover(eventLink) {\n\t\tif (activePopover) closePopover();\n\n\t\tconst content = eventLink.innerHTML;\n\t\tconst customStyle = eventLink.getAttribute('data-popover-style') || '';\n\n\t\t// Create backdrop\n\t\tconst backdrop = document.createElement('div');\n\t\tbackdrop.className = 'gatherpress-calendar__backdrop';\n\t\tbackdrop.addEventListener('click', closePopover);\n\t\tdocument.body.appendChild(backdrop);\n\n\t\t// Create popover\n\t\tconst popover = document.createElement('div');\n\t\tpopover.className = 'gatherpress-calendar__popover';\n\t\tpopover.setAttribute('role', 'dialog');\n\t\tpopover.setAttribute('aria-modal', 'true');\n\t\tif (customStyle) {\n\t\t\tpopover.setAttribute('style', customStyle);\n\t\t}\n\n\t\t// Close button\n\t\tconst closeBtn = document.createElement('button');\n\t\tcloseBtn.className = 'gatherpress-calendar__popover-close';\n\t\tcloseBtn.innerHTML = '&times;';\n\t\tcloseBtn.setAttribute('aria-label', 'Close');\n\t\tcloseBtn.addEventListener('click', closePopover);\n\n\t\tpopover.innerHTML = content;\n\t\tpopover.appendChild(closeBtn);\n\t\tdocument.body.appendChild(popover);\n\n\t\t// Position\n\t\tpositionPopover(popover, eventLink);\n\n\t\t// Animate in\n\t\tsetTimeout(function() {\n\t\t\tbackdrop.classList.add('is-active');\n\t\t\tpopover.classList.add('is-active');\n\t\t}, 10);\n\n\t\tactivePopover = popover;\n\t\tactiveBackdrop = backdrop;\n\t\tpopover.focus();\n\n\t\t// Update position on scroll/resize\n\t\tconst updatePos = function() {\n\t\t\tif (activePopover) positionPopover(popover, eventLink);\n\t\t};\n\t\twindow.addEventListener('scroll', updatePos);\n\t\twindow.addEventListener('resize', updatePos);\n\t\tpopover._cleanup = function() {\n\t\t\twindow.removeEventListener('scroll', updatePos);\n\t\t\twindow.removeEventListener('resize', updatePos);\n\t\t};\n\t}\n\n\t/**\n\t * Position popover near the event dot\n\t */\n\tfunction positionPopover(popover, eventLink) {\n\t\tconst linkRect = eventLink.getBoundingClientRect();\n\t\tconst popRect = popover.getBoundingClientRect();\n\t\tconst vw = window.innerWidth;\n\t\tconst vh = window.innerHeight;\n\t\tconst gap = 10;\n\n\t\tlet top = linkRect.bottom + gap;\n\t\tlet left = linkRect.left + linkRect.width / 2 - popRect.width / 2;\n\n\t\t// Keep in viewport horizontally\n\t\tif (left < gap) left = gap;\n\t\tif (left + popRect.width > vw - gap) left = vw - popRect.width - gap;\n\n\t\t// Keep in viewport vertically\n\t\tif (top + popRect.height > vh - gap) {\n\t\t\ttop = linkRect.top - popRect.height - gap;\n\t\t}\n\t\tif (top < gap) top = gap;\n\n\t\tpopover.style.top = top + 'px';\n\t\tpopover.style.left = left + 'px';\n\t}\n\n\t/**\n\t * Close popover\n\t */\n\tfunction closePopover() {\n\t\tif (!activePopover) return;\n\n\t\tif (activePopover._cleanup) activePopover._cleanup();\n\n\t\tactivePopover.classList.remove('is-active');\n\t\tif (activeBackdrop) activeBackdrop.classList.remove('is-active');\n\n\t\tsetTimeout(function() {\n\t\t\tif (activePopover && activePopover.parentNode) {\n\t\t\t\tactivePopover.parentNode.removeChild(activePopover);\n\t\t\t}\n\t\t\tif (activeBackdrop && activeBackdrop.parentNode) {\n\t\t\t\tactiveBackdrop.parentNode.removeChild(activeBackdrop);\n\t\t\t}\n\t\t\tactivePopover = null;\n\t\t\tactiveBackdrop = null;\n\t\t}, 200);\n\t}\n})();"],"names":["activePopover","activeBackdrop","document","readyState","addEventListener","init","calendars","querySelectorAll","length","forEach","setupCalendar","e","key","closePopover","calendar","events","eventLink","setAttribute","preventDefault","stopPropagation","showPopover","content","innerHTML","customStyle","getAttribute","backdrop","createElement","className","body","appendChild","popover","closeBtn","positionPopover","setTimeout","classList","add","focus","updatePos","window","_cleanup","removeEventListener","linkRect","getBoundingClientRect","popRect","vw","innerWidth","vh","innerHeight","gap","top","bottom","left","width","height","style","remove","parentNode","removeChild"],"ignoreList":[],"sourceRoot":""}